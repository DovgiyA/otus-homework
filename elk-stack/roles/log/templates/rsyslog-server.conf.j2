# Enable UDP syslog reception
$ModLoad imudp
$UDPServerRun 514

# Enable TCP syslog reception  
$ModLoad imtcp
$InputTCPServerRun 514

# Template for forwarding to Logstash
$template LogstashFormat,"<%PRI%>%TIMESTAMP% %HOSTNAME% %syslogtag%%msg:::drop-last-lf%\n"

# Forward all received logs to Logstash on localhost:5000
*.* @@127.0.0.1:5000;LogstashFormat

# Also save logs locally for backup
*.* /var/log/remote-syslog.log
